function view(t){return function(e,n){var o=e.constructor;o.hasOwnProperty("__inject__")||(o.__inject__={}),o.__inject__[n]=t}}function partialView(t){return function(e,n){var o=e.constructor;o.hasOwnProperty("__inject__")||(o.__inject__={}),o.__inject__[n]=t}}function inject(t,e){if(t.__inject__){for(var n=Object.keys(t.__inject__).map(function(e){var n={propertyName:"",constructor:null};return n.propertyName=e,n.constructor=t.__inject__[e],n}),o=0;o<n.length;o++){var i=n[o],r=new i.constructor;r instanceof VirtualView?r.SetContext(e):r instanceof View?(r.SetID(i.propertyName),r.LoadView()):r instanceof ViewGroup&&r.SetContext(e),e[i.propertyName]=r}e.RegisterEvents()}}var View=function(){function t(){}return t.prototype.SetID=function(t){this.attributes={},this.id=t},t.prototype.ViewId=function(){return this.id},t.prototype.LoadView=function(){this.target=$("#"+this.id)},t.prototype.BindBySelector=function(t){this.target=$(t)},t.prototype.SetStyle=function(t,e){this.target.css(t,e)},t.prototype.SetAttr=function(t,e){this.attributes[t]=e},t.prototype.Attr=function(t){return this.attributes[t]},t.prototype.On=function(t,e){null!=this.target&&this.target.on(t,e)},t.prototype.OnClick=function(t){null!=this.target&&this.target.click(t)},t.prototype.SetClass=function(t,e){e?this.target.find(e).addClass(t):this.target.addClass(t)},t.prototype.RemoveClass=function(t,e){e?this.target.find(e).removeClass(t):this.target.removeClass(t)},t}(),__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},VirtualView=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.SetContext=function(t){this.context=t},e.prototype.LoadView=function(){this.SetTemplate(),t.prototype.LoadView.call(this),this.target.append(this.template),inject(this.constructor,this)},e}(View),__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},TextView=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.SetText=function(t){this.target.text(t)},e.prototype.GetText=function(){return this.target.text()},e.prototype.SetColor=function(t){this.target.css("color",t)},e.prototype.SetBackgroundColor=function(t){this.target.css("background-color",t)},e.prototype.SetSize=function(t){this.target.css("font-size",t)},e}(View),__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ListView=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.SetData=function(t){this.mData=t,this.RefreshView()},e.prototype.Add=function(t){this.mData.push(t),this.append(this.GetView(this.mData.length-1))},e.prototype.LoadView=function(){t.prototype.LoadView.call(this),this.mData=[]},e.prototype.Clear=function(){this.target.html("")},e.prototype.Remove=function(t){if("number"==typeof t){var e=t;if(0>e||e>this.mData.length)return;for(var n=e;n<this.mData.length-1;n++)this.mData[n]=this.mData[n+1];this.mData.pop()}else for(var o=t,i=0;i<this.mData.length;i++)if(this.mData[i]==o){for(var n=i;n<this.mData.length-1;n++)this.mData[n]=this.mData[n+1];this.mData.pop();break}this.RefreshView()},e.prototype.GetItem=function(t){if("number"==typeof t){var e=t;return 0>e||e>this.mData.length?null:this.mData[e]}if("function"==typeof t){var n=t;return this.mData.where(n).first()}},e.prototype.SetItem=function(t,e){if("number"==typeof t){if(0>t||t>=this.Count())return;this.mData[t]=e}else if("function"==typeof t)for(var n=t,o=0;o<this.Count();o++)if(n(this.mData[o])){this.mData[o]=e;break}this.RefreshView()},e.prototype.Count=function(){return this.mData.length},e.prototype.GetItemId=function(t){return 0},e.prototype.GetView=function(t){return""},e.prototype.RefreshView=function(){if(this.Clear(),null!=this.mData)for(var t=0;t<this.mData.length;t++)this.append(this.GetView(t))},e.prototype.append=function(t){this.target.append(t)},e}(View),BaseViewModel=function(){function t(){inject(this.constructor,this)}return t}(),__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ViewGroup=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.SetContext=function(t){this.context=t},e}(BaseViewModel),ServicePool=function(){function t(){this.instances={}}return t.prototype.GetService=function(t){var e=t.prototype.constructor.name;return e||(e=t.toString().match(/^function\s*([^\s(]+)/)[1]),this.instances[e]||(this.instances[e]=new t),this.instances[e]},t.prototype.ReleaseService=function(){},t}(),ServicePoolInstance=new ServicePool,__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},PageListView=function(t){function e(){t.call(this),this.async=!0}return __extends(e,t),e.prototype.SetItemCount=function(t){this.itemCount=t},e.prototype.SetData=function(e){t.prototype.SetData.call(this,e),this.async||(this.itemCount=e.length)},e.prototype.LoadView=function(){t.prototype.LoadView.call(this),this.pageable=Boolean(this.target.attr("data-pageable"))},e}(ListView);